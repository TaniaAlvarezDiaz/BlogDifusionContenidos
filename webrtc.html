<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <link rel="stylesheet" media="screen" type="text/css" href="./styles/default.css">
        <link rel="stylesheet" media="screen" type="text/css" href="./styles/webrtc.css">
        <title>Blog</title>
    </head>

    <body id="wrapper">
        <header id="header">
            <h1>Blog de difusión de contenidos</h1>
        </header>

        <nav id="navigation">
            <a href="index.html" accesskey="B" title="Blog de difusión de contenidos">Blog</a>
            <a href="websockets.html" accesskey="W" title="Dibujo colaborativo con WebSockets">WebSockets</a>
            <a href="webrtc.html" accesskey="R" title="Video-Chat con WebRTC"  class="selected">WebRTC</a>
            <a href="video.html" accesskey="V" title="Vídeo realizado en grupo">Video grupal</a>
        </nav>

        <main id="content">
            <section>
                <h2>Aplicación de videochat con WebRTC</h2>
                <article>
                    <h3>Introducción</h3>
                    <p>
						El proyecto consiste en el desarrollo de una aplicación de videochat utilizando <a href="https://webrtc.org/">WebRTC</a>.<br/>
						Esta aplicación consta de:
						<ul>
							<li><b>Servidor</b>: encargado de gestionar las conexiones de los usuarios.
							<li><b>Cliente</b>: permite a los usuarios conectarse al servidor y realizar el intercambio de vídeo y mensajes de chat con el resto de usuarios conectados al servidor (usando el nombre de dicho usuario).</li>
						</ul>
					</p>
                </article>
                <article>
                    <h3>Desarrollo</h3>
                    <p>Para desarrollar tanto el cliente como el servidor se ha utilizado <a href="https://code.visualstudio.com/">Visual Studio Code.</a> Adicionalmente, se ha utilizado <a href="https://www.apachefriends.org/es/index.html">XAMPP</a>
                        para desplegar a los clientes y <a href="https://nodejs.org/es/">Node.js</a> para instalar y ejecutar el servidor.</p>
                    <p>Para instalar el servidor se ha creado la carpeta <b>DrawingServer</b> y desde la consola de Node.js se ha accedido a ella y se ha ejecutado el comando <b>npm init</b>.</p>
                    <figure class="center">
                        <img src="./images/webrtc_server_installation.JPG"
                            alt="Instalación del servidor con Node.js" />
                        <figcaption>Instalación del servidor con Node.js</figcaption>
                    </figure>
                    <section>
                        <h4>Desarrollo del servidor</h4>
                        <p>
                            Tras instalar el servidor en Node.js, se han instalado, con el comando <b>npm install NOMBRE_PAQUETE</b>, dos paquetes:
                            <ul>
                                <li><b>ws</b>: biblioteca de WebSockets para proporcionar un canal de comunicación bidireccional entre cliente y servidor.</li>
                                <li><b>express</b>: framework web para Node.js.</li>
                            </ul>
                            A continuación, se ha creado el fichero <b>server.js</b> dentro de la carpeta <b>WebRTCServer</b>.<br/>
                            Este fichero contiene la implementación del servidor, es decir, las variables y funciones necesarias para que éste realice su funcionalidad.
                        </p>
                        
                    </section>
                    <section>
                        <h4>Desarrollo del cliente</h4>
                        <p>
                            Para desarrollar el cliente se ha utilizado HTML, CSS y Javascript. Por tanto, el proyecto está formado por tres ficheros:
                            <ul>
                                <li>
                                    <b>Index.html</b>: fichero HTML que representa la vista del cliente (botones, vídeos y chat).<br/>
                                </li>
                                <li><b>Style.css</b>: fichero CSS que contiene los estilos que se aplican a los elementos del fichero HTML.</li>
                                <li>
                                    <b>Script.js</b>: fichero Javascript donde se encuentra la implementación (lógica) del cliente, es decir, las funciones necesarias para 
                                    comunicarse con el servidor, intercambiar mensajes con otros usuarios, etc.
                                </li>
                            </ul>
                        </p>
                        <p>A continuación, se explican las funciones más importantes del fichero <b>script.js</b>.</p>
                        <p>
                            El servidor WebSocket cuenta con varias funciones que se ejecutan en función del tipo de evento que se produza.
                            <ul>
                                <li>El evento <b>connection</b> se produce cuando se establece la conexión entre el cliente y el servidor.</li>
                                <li>
                                    El evento <b>message</b> se produce cuando el servidor recibe un mensaje del cliente a través de la conexión establecida.<br/>
                                    En función del tipo de mensaje se producen distintas acciones.
                                </li>
                            </ul>
                        </p>

                       
                        
                        <figure class="center">
                            <img src="./images/websockets_client_onMessageFromServer_function.JPG"
                                alt="Cliente - Función 'onMessageFromServer'" />
                            <figcaption>Cliente - Función <b>onMessageFromServer</b></figcaption>
                        </figure>
                        
                    </section>
                </article>
                <article>
                    <h3>Ejecución</h3>
                    <p>Para poder ejecutar la aplicación es necesario arrancar el servidor y ejecutar dos clientes.</p>
                    <p>Por un lado, para arrancar el servidor, se debe ejecutar la consola de <b>Node.js</b> y acceder a la ruta del servidor. Una vez ahí, se debe ejecutar el comando <b>node server.js</b>.</p>
                    <p>
                        Por otro lado, para ejecutar el cliente, se debe introducir éste en la carpeta <b>htdocs</b> de XAMPP. <br/>
                        Seguidamente, se debe arrancar el servicio <b>Apache</b> de XAMPP.<br/>
                        A continuación, se deben abrir en el navegador Chrome dos instancias del cliente. Para ello se debe ejecutar <b>localhost/NOMBRE_CLIENTE</b>, donde NOMBRE_CLIENTE es el nombre de la carpeta 
                        donde se encuentran los archivos del cliente (carpeta dentro de <b>htdocs</b>).
                    </p>
                </article>
                <article>
                    <h3>Despliegue</h3>
                    <p>
                        El código de esta aplicación se puede encontrar en el <a href="https://github.com/TaniaAlvarezDiaz/VideochatWebRTC">GitHub</a> de la autora, así como el código
                        del <a href="https://github.com/TaniaAlvarezDiaz/VideochatWebRTCServidor">servidor</a> y del <a href="https://github.com/TaniaAlvarezDiaz/VideochatWebRTCCliente">cliente</a>.
                    </p>
                    <p>
                        Adicionalmente, se ha creado una <a href="https://taniaalvarezdiaz.github.io/SlidesVideochatWebRTC">presentación</a> (resumen de esta entrada del blog) con el framework <b>Reveal.js</b> cuyo 
                        código se puede encontrar en este <a href="https://github.com/TaniaAlvarezDiaz/SlidesVideochatWebRTC">enlace</a>.
                    </p>
                </article>
            </section>
        </main>

        <footer id="footer">
            <a href="mailto:UO244856@uniovi.es">Tania Álvarez Díaz</a>
            <p>Difusión de contenidos multimedia - MIW</p>
        </footer>
    </body>
</html>